// Function to categorize cities by population
function categorizeCities(cities) {
    return cities.map(city => {
        let category;
        if (city.population > 1000000) {
            category = "Metropolis";
        } else if (city.population > 500000) {
            category = "Large City";
        } else if (city.population > 100000) {
            category = "Medium City";
        } else {
            category = "Small Town";
        }
        return { ...city, category };
    });
}

// UK Towns and Cities with population data, area codes, and coordinates
const ukTownsAndCities = categorizeCities([
    // Major Cities (Population > 500,000)
    { name: "London", population: 9002488, areaCode: "020", latitude: 51.5074, longitude: -0.1278 },
    { name: "Birmingham", population: 2670029, areaCode: "0121", latitude: 52.4862, longitude: -1.8904 },
    { name: "Manchester", population: 2553379, areaCode: "0161", latitude: 53.4808, longitude: -2.2426 },
    { name: "Leeds", population: 1889095, areaCode: "0113", latitude: 53.8008, longitude: -1.5491 },
    { name: "Glasgow", population: 1673332, areaCode: "0141", latitude: 55.8642, longitude: -4.2518 },
    { name: "Liverpool", population: 864122, areaCode: "0151", latitude: 53.4084, longitude: -2.9916 },
    { name: "Newcastle upon Tyne", population: 774891, areaCode: "0191", latitude: 54.9783, longitude: -1.6178 },
    { name: "Sheffield", population: 685368, areaCode: "0114", latitude: 53.3811, longitude: -1.4701 },
    { name: "Bristol", population: 617280, areaCode: "0117", latitude: 51.4545, longitude: -2.5879 },
    { name: "Edinburgh", population: 524930, areaCode: "0131", latitude: 55.9533, longitude: -3.1883 },

    // Large Towns and Cities (Population 200,000 - 500,000)
    { name: "Cardiff", population: 447287, areaCode: "029", latitude: 51.4816, longitude: -3.1791 },
    { name: "Nottingham", population: 321500, areaCode: "0115", latitude: 52.9548, longitude: -1.1581 },
    { name: "Leicester", population: 329839, areaCode: "0116", latitude: 52.6369, longitude: -1.1398 },
    { name: "Coventry", population: 316915, areaCode: "024", latitude: 52.4068, longitude: -1.5197 },
    { name: "Hull", population: 314018, areaCode: "01482", latitude: 53.7676, longitude: -0.3274 },
    { name: "Bradford", population: 299310, areaCode: "01274", latitude: 53.7960, longitude: -1.7594 },
    { name: "Aberdeen", population: 228990, areaCode: "01224", latitude: 57.1497, longitude: -2.0943 },
    { name: "Southampton", population: 236882, areaCode: "023", latitude: 50.9097, longitude: -1.4044 },
    { name: "Reading", population: 232662, areaCode: "0118", latitude: 51.4543, longitude: -0.9781 },
    { name: "Derby", population: 229407, areaCode: "01332", latitude: 52.9225, longitude: -1.4746 },
    { name: "Plymouth", population: 234982, areaCode: "01752", latitude: 50.3755, longitude: -4.1427 },

    // Medium Towns and Cities (Population 100,000 - 200,000)
    { name: "Stoke-on-Trent", population: 225648, areaCode: "01782", latitude: 53.0027, longitude: -2.1794 },
    { name: "Wolverhampton", population: 210319, areaCode: "01902", latitude: 52.5870, longitude: -2.1288 },
    { name: "Norwich", population: 205228, areaCode: "01603", latitude: 52.6309, longitude: 1.2974 },
    { name: "Brighton", population: 229700, areaCode: "01273", latitude: 50.8225, longitude: -0.1372 },
    { name: "Portsmouth", population: 205056, areaCode: "023", latitude: 50.8198, longitude: -1.0880 },
    { name: "Swansea", population: 170883, areaCode: "01792", latitude: 51.6214, longitude: -3.9436 },
    { name: "Milton Keynes", population: 169773, areaCode: "01908", latitude: 52.0406, longitude: -0.7594 },
    { name: "Sunderland", population: 174286, areaCode: "0191", latitude: 54.9069, longitude: -1.3836 },
    { name: "Luton", population: 164707, areaCode: "01582", latitude: 51.8787, longitude: -0.4200 },
    { name: "York", population: 153717, areaCode: "01904", latitude: 53.9600, longitude: -1.0873 },
    { name: "Oxford", population: 152457, areaCode: "01865", latitude: 51.7520, longitude: -1.2577 },
    { name: "Blackpool", population: 139720, areaCode: "01253", latitude: 53.8168, longitude: -3.0357 },
    { name: "Cambridge", population: 124798, areaCode: "01223", latitude: 52.2053, longitude: 0.1218 },
    { name: "Dundee", population: 148210, areaCode: "01382", latitude: 56.4620, longitude: -2.9707 },
    { name: "Exeter", population: 117773, areaCode: "01392", latitude: 50.7184, longitude: -3.5339 },
    { name: "Gloucester", population: 118900, areaCode: "01452", latitude: 51.8642, longitude: -2.2380 },
    { name: "Telford", population: 142723, areaCode: "01952", latitude: 52.6777, longitude: -2.4459 },
    { name: "Blackburn", population: 105085, areaCode: "01254", latitude: 53.7467, longitude: -2.4853 },

    // Additional Towns (Population 50,000 - 100,000)
    { name: "Warrington", population: 98800, areaCode: "01925", latitude: 53.3900, longitude: -2.5970 },
    { name: "Slough", population: 97000, areaCode: "01753", latitude: 51.5105, longitude: -0.5950 },
    { name: "Eastbourne", population: 95000, areaCode: "01323", latitude: 50.7686, longitude: 0.2905 },
    { name: "Basildon", population: 94000, areaCode: "01268", latitude: 51.5762, longitude: 0.4789 },
    { name: "Grimsby", population: 93000, areaCode: "01472", latitude: 53.5595, longitude: -0.0683 },
    { name: "High Wycombe", population: 92000, areaCode: "01494", latitude: 51.6285, longitude: -0.7485 },
    { name: "Hastings", population: 91000, areaCode: "01424", latitude: 50.8543, longitude: 0.5735 },
    { name: "Watford", population: 90000, areaCode: "01923", latitude: 51.6565, longitude: -0.3903 },
    { name: "Rotherham", population: 89000, areaCode: "01709", latitude: 53.4326, longitude: -1.3635 },
    { name: "Maidstone", population: 88000, areaCode: "01622", latitude: 51.2720, longitude: 0.5292 },
    { name: "Chelmsford", population: 87000, areaCode: "01245", latitude: 51.7355, longitude: 0.4692 },
    { name: "Colchester", population: 86000, areaCode: "01206", latitude: 51.8959, longitude: 0.8919 },
    { name: "Crawley", population: 85000, areaCode: "01293", latitude: 51.1132, longitude: -0.1871 },
    { name: "Worcester", population: 84000, areaCode: "01905", latitude: 52.1935, longitude: -2.2215 },
    { name: "St Albans", population: 83000, areaCode: "01727", latitude: 51.7520, longitude: -0.3343 },
    { name: "Rochdale", population: 82000, areaCode: "01706", latitude: 53.6143, longitude: -2.1552 },
    { name: "Birkenhead", population: 81000, areaCode: "0151", latitude: 53.3933, longitude: -3.0145 },
    { name: "Harlow", population: 80000, areaCode: "01279", latitude: 51.7676, longitude: 0.0953 },
    { name: "Chester", population: 79000, areaCode: "01244", latitude: 53.1905, longitude: -2.8916 },
    { name: "Burnley", population: 78000, areaCode: "01282", latitude: 53.7897, longitude: -2.2427 },
    { name: "Darlington", population: 77000, areaCode: "01325", latitude: 54.5235, longitude: -1.5579 },
    { name: "Stevenage", population: 76000, areaCode: "01438", latitude: 51.9037, longitude: -0.2052 },
    { name: "Wigan", population: 75000, areaCode: "01942", latitude: 53.5457, longitude: -2.6338 },
    { name: "Carlisle", population: 74000, areaCode: "01228", latitude: 54.8925, longitude: -2.9340 },
    { name: "Halifax", population: 73000, areaCode: "01422", latitude: 53.7267, longitude: -1.8580 },
    { name: "Southport", population: 72000, areaCode: "01704", latitude: 53.6474, longitude: -3.0024 },
    { name: "Wakefield", population: 71000, areaCode: "01924", latitude: 53.6833, longitude: -1.4977 },
    { name: "Worthing", population: 70000, areaCode: "01903", latitude: 50.8180, longitude: -0.3743 },
    { name: "Mansfield", population: 69000, areaCode: "01623", latitude: 53.1428, longitude: -1.1979 },
    { name: "Chesterfield", population: 68000, areaCode: "01246", latitude: 53.2357, longitude: -1.4259 },
    
    // New additions from Ofcom area codes
    { name: "Bath", population: 65000, areaCode: "01225", latitude: 51.3758, longitude: -2.3599 },
    { name: "Aylesbury", population: 58400, areaCode: "01296", latitude: 51.8156, longitude: -0.8125 },
    { name: "Barnsley", population: 91297, areaCode: "01226", latitude: 53.5533, longitude: -1.4790 },
    { name: "Bedford", population: 87590, areaCode: "01234", latitude: 52.1389, longitude: -0.4667 },
    { name: "Boston", population: 35124, areaCode: "01205", latitude: 52.9791, longitude: -0.0264 },
    { name: "Canterbury", population: 55240, areaCode: "01227", latitude: 51.2800, longitude: 1.0800 },
    { name: "Cheltenham", population: 115300, areaCode: "01242", latitude: 51.8959, longitude: -2.0783 },
    { name: "Chichester", population: 26795, areaCode: "01243", latitude: 50.8365, longitude: -0.7792 },
    { name: "Doncaster", population: 110000, areaCode: "01302", latitude: 53.5225, longitude: -1.1334 },
    { name: "Durham", population: 48069, areaCode: "0191", latitude: 54.7761, longitude: -1.5733 },
    { name: "Guildford", population: 77057, areaCode: "01483", latitude: 51.2362, longitude: -0.5704 },
    { name: "Harrogate", population: 75070, areaCode: "01423", latitude: 53.9900, longitude: -1.5370 },
    { name: "Hereford", population: 55800, areaCode: "01432", latitude: 52.0567, longitude: -2.7160 },
    { name: "Huddersfield", population: 162949, areaCode: "01484", latitude: 53.6458, longitude: -1.7850 },
    { name: "Ipswich", population: 133384, areaCode: "01473", latitude: 52.0567, longitude: 1.1482 },
    { name: "Lancaster", population: 52234, areaCode: "01524", latitude: 54.0474, longitude: -2.8027 },
    { name: "Lincoln", population: 94600, areaCode: "01522", latitude: 53.2307, longitude: -0.5406 },
    { name: "Middlesbrough", population: 140545, areaCode: "01642", latitude: 54.5742, longitude: -1.2350 },
    { name: "Northampton", population: 215963, areaCode: "01604", latitude: 52.2405, longitude: -0.9027 },
    { name: "Oldham", population: 96555, areaCode: "0161", latitude: 53.5409, longitude: -2.1114 },
    { name: "Peterborough", population: 202259, areaCode: "01733", latitude: 52.5725, longitude: -0.2431 },
    { name: "Preston", population: 141818, areaCode: "01772", latitude: 53.7632, longitude: -2.7029 },
    { name: "Salisbury", population: 40302, areaCode: "01722", latitude: 51.0693, longitude: -1.7957 },
    { name: "Scarborough", population: 61749, areaCode: "01723", latitude: 54.2823, longitude: -0.4026 },
    { name: "Stafford", population: 68472, areaCode: "01785", latitude: 52.8053, longitude: -2.1169 },
    { name: "Stockport", population: 136882, areaCode: "0161", latitude: 53.4083, longitude: -2.1494 },
    { name: "Swindon", population: 185609, areaCode: "01793", latitude: 51.5558, longitude: -1.7797 },
    { name: "Taunton", population: 69570, areaCode: "01823", latitude: 51.0150, longitude: -3.1027 },
    { name: "Torquay", population: 65245, areaCode: "01803", latitude: 50.4619, longitude: -3.5253 },
    { name: "Walsall", population: 67594, areaCode: "01922", latitude: 52.5862, longitude: -1.9829 },
    { name: "Winchester", population: 45184, areaCode: "01962", latitude: 51.0632, longitude: -1.3082 },
    { name: "Wrexham", population: 65692, areaCode: "01978", latitude: 53.0428, longitude: -2.9926 },
    
    // Additional towns from Ofcom area codes
    { name: "Abingdon", population: 33130, areaCode: "01235", latitude: 51.6711, longitude: -1.2828 },
    { name: "Aldershot", population: 37340, areaCode: "01252", latitude: 51.2520, longitude: -0.7632 },
    { name: "Andover", population: 38290, areaCode: "01264", latitude: 51.2088, longitude: -1.4800 },
    { name: "Ashford", population: 45780, areaCode: "01233", latitude: 51.1465, longitude: 0.8752 },
    { name: "Banbury", population: 46853, areaCode: "01295", latitude: 52.0602, longitude: -1.3403 },
    { name: "Barnstaple", population: 24033, areaCode: "01271", latitude: 51.0777, longitude: -4.0583 },
    { name: "Basingstoke", population: 85627, areaCode: "01256", latitude: 51.2667, longitude: -1.0876 },
    { name: "Berwick-upon-Tweed", population: 12043, areaCode: "01289", latitude: 55.7702, longitude: -2.0053 },
    { name: "Beverley", population: 29403, areaCode: "01482", latitude: 53.8450, longitude: -0.4271 },
    { name: "Bishops Stortford", population: 37838, areaCode: "01279", latitude: 51.8720, longitude: 0.1630 },
    { name: "Bognor Regis", population: 63855, areaCode: "01243", latitude: 50.7843, longitude: -0.6721 },
    { name: "Bridgwater", population: 35886, areaCode: "01278", latitude: 51.1280, longitude: -2.9927 },
    { name: "Bridlington", population: 35369, areaCode: "01262", latitude: 54.0831, longitude: -0.1937 },
    { name: "Bromsgrove", population: 29237, areaCode: "01527", latitude: 52.3352, longitude: -2.0566 },
    { name: "Bury St Edmunds", population: 41332, areaCode: "01284", latitude: 52.2474, longitude: 0.7183 },
    { name: "Camberley", population: 38031, areaCode: "01276", latitude: 51.3354, longitude: -0.7439 },
    { name: "Cannock", population: 29018, areaCode: "01543", latitude: 52.6890, longitude: -2.0320 },
    { name: "Chippenham", population: 45620, areaCode: "01249", latitude: 51.4585, longitude: -2.1158 },
    { name: "Cirencester", population: 19076, areaCode: "01285", latitude: 51.7174, longitude: -1.9680 },
    { name: "Clacton-on-Sea", population: 54095, areaCode: "01255", latitude: 51.7924, longitude: 1.1545 },
    { name: "Congleton", population: 26482, areaCode: "01260", latitude: 53.1638, longitude: -2.2131 },
    { name: "Corby", population: 56810, areaCode: "01536", latitude: 52.4911, longitude: -0.7037 },
    { name: "Dartford", population: 97365, areaCode: "01322", latitude: 51.4463, longitude: 0.2192 },
    { name: "Daventry", population: 25026, areaCode: "01327", latitude: 52.2569, longitude: -1.1633 },
    { name: "Deal", population: 30085, areaCode: "01304", latitude: 51.2233, longitude: 1.4018 },
    { name: "Dewsbury", population: 62945, areaCode: "01924", latitude: 53.6921, longitude: -1.6345 },
    { name: "Dover", population: 31022, areaCode: "01304", latitude: 51.1295, longitude: 1.3089 },
    { name: "Dunstable", population: 36253, areaCode: "01582", latitude: 51.8858, longitude: -0.5206 },
    { name: "Epsom", population: 31489, areaCode: "01372", latitude: 51.3364, longitude: -0.2702 },
    { name: "Evesham", population: 24428, areaCode: "01386", latitude: 52.0935, longitude: -1.9456 },
    { name: "Falmouth", population: 21797, areaCode: "01326", latitude: 50.1527, longitude: -5.0706 },
    { name: "Fareham", population: 42210, areaCode: "01329", latitude: 50.8522, longitude: -1.1762 },
    { name: "Farnborough", population: 57486, areaCode: "01252", latitude: 51.2867, longitude: -0.7520 },
    { name: "Farnham", population: 39488, areaCode: "01252", latitude: 51.2147, longitude: -0.7973 },
    { name: "Folkestone", population: 46698, areaCode: "01303", latitude: 51.0813, longitude: 1.1796 },
    { name: "Glastonbury", population: 8932, areaCode: "01458", latitude: 51.1485, longitude: -2.7182 },
    { name: "Gosport", population: 82622, areaCode: "023", latitude: 50.7925, longitude: -1.1178 },
    { name: "Great Yarmouth", population: 38693, areaCode: "01493", latitude: 52.6088, longitude: 1.7307 },
    { name: "Hartlepool", population: 88855, areaCode: "01429", latitude: 54.6912, longitude: -1.2131 },
    { name: "Harwich", population: 14314, areaCode: "01255", latitude: 51.9425, longitude: 1.2867 },
    { name: "Havant", population: 45826, areaCode: "023", latitude: 50.8542, longitude: -0.9825 },
    { name: "Hemel Hempstead", population: 97500, areaCode: "01442", latitude: 51.7526, longitude: -0.4687 },
    { name: "Hereford", population: 55800, areaCode: "01432", latitude: 52.0567, longitude: -2.7160 },
    { name: "Hitchin", population: 33350, areaCode: "01462", latitude: 51.9469, longitude: -0.2827 },
    { name: "Hoddesdon", population: 20250, areaCode: "01992", latitude: 51.7614, longitude: -0.0113 },
    { name: "Huntingdon", population: 24910, areaCode: "01480", latitude: 52.3314, longitude: -0.1708 },
    { name: "Keighley", population: 53331, areaCode: "01535", latitude: 53.8679, longitude: -1.9067 },
    { name: "Kendal", population: 28586, areaCode: "01539", latitude: 54.3279, longitude: -2.7474 },
    { name: "Kettering", population: 56226, areaCode: "01536", latitude: 52.3987, longitude: -0.7270 },
    { name: "Kidderminster", population: 55530, areaCode: "01562", latitude: 52.3875, longitude: -2.2501 },
    { name: "King's Lynn", population: 42800, areaCode: "01553", latitude: 52.7543, longitude: 0.3976 },
    { name: "Leamington Spa", population: 52213, areaCode: "01926", latitude: 52.2823, longitude: -1.5359 },
    { name: "Letchworth", population: 33690, areaCode: "01462", latitude: 51.9792, longitude: -0.2289 },
    { name: "Lichfield", population: 32219, areaCode: "01543", latitude: 52.6812, longitude: -1.8271 },
    { name: "Lowestoft", population: 71010, areaCode: "01502", latitude: 52.4754, longitude: 1.7501 },
    { name: "Lytham St Annes", population: 42954, areaCode: "01253", latitude: 53.7516, longitude: -2.9638 },
    { name: "Malvern", population: 29626, areaCode: "01684", latitude: 52.1113, longitude: -2.3288 },
    { name: "Margate", population: 61223, areaCode: "01843", latitude: 51.3813, longitude: 1.3862 },
    { name: "Market Harborough", population: 22911, areaCode: "01858", latitude: 52.4771, longitude: -0.9209 },
    { name: "Melton Mowbray", population: 25554, areaCode: "01664", latitude: 52.7667, longitude: -0.8858 },
    { name: "Morecambe", population: 34843, areaCode: "01524", latitude: 54.0698, longitude: -2.8686 },
    { name: "Newark", population: 37084, areaCode: "01636", latitude: 53.0750, longitude: -0.8102 },
    { name: "Newbury", population: 31075, areaCode: "01635", latitude: 51.4009, longitude: -1.3235 },
    { name: "Newquay", population: 22000, areaCode: "01637", latitude: 50.4155, longitude: -5.0737 },
    { name: "Newton Abbot", population: 24029, areaCode: "01626", latitude: 50.5297, longitude: -3.6103 },
    { name: "Nuneaton", population: 86552, areaCode: "024", latitude: 52.5230, longitude: -1.4671 },
    { name: "Pontefract", population: 30881, areaCode: "01977", latitude: 53.6921, longitude: -1.3123 },
    { name: "Poole", population: 150092, areaCode: "01202", latitude: 50.7175, longitude: -1.9874 },
    { name: "Ramsgate", population: 40408, areaCode: "01843", latitude: 51.3364, longitude: 1.4196 },
    { name: "Redhill", population: 34498, areaCode: "01737", latitude: 51.2404, longitude: -0.1702 },
    { name: "Rugby", population: 70628, areaCode: "01788", latitude: 52.3711, longitude: -1.2652 },
    { name: "Runcorn", population: 61789, areaCode: "01928", latitude: 53.3418, longitude: -2.7314 },
    { name: "St Austell", population: 19958, areaCode: "01726", latitude: 50.3382, longitude: -4.7871 },
    { name: "St Helens", population: 102629, areaCode: "01744", latitude: 53.4560, longitude: -2.7379 },
    { name: "Scarborough", population: 61749, areaCode: "01723", latitude: 54.2823, longitude: -0.4026 },
    { name: "Scunthorpe", population: 82334, areaCode: "01724", latitude: 53.5884, longitude: -0.6500 },
    { name: "Skegness", population: 19579, areaCode: "01754", latitude: 53.1446, longitude: 0.3363 },
    { name: "Spalding", population: 28722, areaCode: "01775", latitude: 52.7858, longitude: -0.1529 },
    { name: "Stafford", population: 68472, areaCode: "01785", latitude: 52.8053, longitude: -2.1169 },
    { name: "Staines", population: 27894, areaCode: "01784", latitude: 51.4314, longitude: -0.5046 },
    { name: "Stamford", population: 19701, areaCode: "01780", latitude: 52.6569, longitude: -0.4787 },
    { name: "Stevenage", population: 87754, areaCode: "01438", latitude: 51.9022, longitude: -0.2022 },
    { name: "Stratford-upon-Avon", population: 27445, areaCode: "01789", latitude: 52.1917, longitude: -1.7067 },
    { name: "Stroud", population: 32670, areaCode: "01453", latitude: 51.7449, longitude: -2.2161 },
    { name: "Tamworth", population: 76589, areaCode: "01827", latitude: 52.6339, longitude: -1.6959 },
    { name: "Tewkesbury", population: 19901, areaCode: "01684", latitude: 51.9941, longitude: -2.1579 },
    { name: "Tonbridge", population: 40356, areaCode: "01732", latitude: 51.1892, longitude: 0.2739 },
    { name: "Trowbridge", population: 39409, areaCode: "01225", latitude: 51.3187, longitude: -2.2087 },
    { name: "Tunbridge Wells", population: 56500, areaCode: "01892", latitude: 51.1326, longitude: 0.2673 },
    { name: "Uckfield", population: 14493, areaCode: "01825", latitude: 50.9701, longitude: 0.0953 },
    { name: "Wadebridge", population: 7900, areaCode: "01208", latitude: 50.5168, longitude: -4.8343 },
    { name: "Wellingborough", population: 49087, areaCode: "01933", latitude: 52.3023, longitude: -0.6937 },
    { name: "Welwyn Garden City", population: 48380, areaCode: "01707", latitude: 51.8025, longitude: -0.2072 },
    { name: "Weston-super-Mare", population: 76143, areaCode: "01934", latitude: 51.3477, longitude: -2.9767 },
    { name: "Weymouth", population: 52323, areaCode: "01305", latitude: 50.6141, longitude: -2.4577 },
    { name: "Whitby", population: 13213, areaCode: "01947", latitude: 54.4858, longitude: -0.6142 },
    { name: "Widnes", population: 61464, areaCode: "0151", latitude: 53.3650, longitude: -2.7316 },
    { name: "Windsor", population: 32744, areaCode: "01753", latitude: 51.4839, longitude: -0.6044 },
    { name: "Witney", population: 27522, areaCode: "01993", latitude: 51.7859, longitude: -1.4851 },
    { name: "Woking", population: 62796, areaCode: "01483", latitude: 51.3190, longitude: -0.5576 },
    { name: "Workington", population: 25207, areaCode: "01900", latitude: 54.6433, longitude: -3.5457 },
    { name: "Yeovil", population: 45784, areaCode: "01935", latitude: 50.9421, longitude: -2.6328 }
]);
