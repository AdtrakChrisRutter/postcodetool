// Function to categorize cities by population
function categorizeCities(cities) {
    return cities.map(city => {
        let category;
        if (city.population > 1000000) {
            category = "Metropolis";
        } else if (city.population > 500000) {
            category = "Large City";
        } else if (city.population > 100000) {
            category = "Medium City";
        } else {
            category = "Small Town";
        }
        return { ...city, category };
    });
}

// UK Towns and Cities with population data, area codes, and coordinates
const ukTownsAndCities = [
    // Major Cities (Population > 500,000)
    { name: "London", population: 9002488, latitude: 51.5074, longitude: -0.1278 },
    { name: "Birmingham", population: 2670029, latitude: 52.4862, longitude: -1.8904 },
    { name: "Manchester", population: 2553379, latitude: 53.4808, longitude: -2.2426 },
    { name: "Leeds", population: 1889095, latitude: 53.8008, longitude: -1.5491 },
    { name: "Glasgow", population: 1673332, latitude: 55.8642, longitude: -4.2518 },
    { name: "Liverpool", population: 864122, latitude: 53.4084, longitude: -2.9916 },
    { name: "Newcastle upon Tyne", population: 774891, latitude: 54.9783, longitude: -1.6178 },
    { name: "Sheffield", population: 685368, latitude: 53.3811, longitude: -1.4701 },
    { name: "Bristol", population: 617280, latitude: 51.4545, longitude: -2.5879 },
    { name: "Edinburgh", population: 524930, latitude: 55.9533, longitude: -3.1883 },

    // Large Towns and Cities (Population 200,000 - 500,000)
    { name: "Cardiff", population: 447287, latitude: 51.4816, longitude: -3.1791 },
    { name: "Nottingham", population: 321500, latitude: 52.9548, longitude: -1.1581 },
    { name: "Leicester", population: 329839, latitude: 52.6369, longitude: -1.1398 },
    { name: "Coventry", population: 316915, latitude: 52.4068, longitude: -1.5197 },
    { name: "Hull", population: 314018, latitude: 53.7676, longitude: -0.3274 },
    { name: "Bradford", population: 299310, latitude: 53.7960, longitude: -1.7594 },
    { name: "Aberdeen", population: 228990, latitude: 57.1497, longitude: -2.0943 },
    { name: "Southampton", population: 236882, latitude: 50.9097, longitude: -1.4044 },
    { name: "Reading", population: 232662, latitude: 51.4543, longitude: -0.9781 },
    { name: "Derby", population: 229407, latitude: 52.9225, longitude: -1.4746 },
    { name: "Plymouth", population: 234982, latitude: 50.3755, longitude: -4.1427 },

    // Medium Towns and Cities (Population 100,000 - 200,000)
    { name: "Stoke-on-Trent", population: 225648, latitude: 53.0027, longitude: -2.1794 },
    { name: "Wolverhampton", population: 210319, latitude: 52.5870, longitude: -2.1288 },
    { name: "Norwich", population: 205228, latitude: 52.6309, longitude: 1.2974 },
    { name: "Brighton", population: 229700, latitude: 50.8225, longitude: -0.1372 },
    { name: "Portsmouth", population: 205056, latitude: 50.8198, longitude: -1.0880 },
    { name: "Swansea", population: 170883, latitude: 51.6214, longitude: -3.9436 },
    { name: "Milton Keynes", population: 169773, latitude: 52.0406, longitude: -0.7594 },
    { name: "Sunderland", population: 174286, latitude: 54.9069, longitude: -1.3836 },
    { name: "Luton", population: 164707, latitude: 51.8787, longitude: -0.4200 },
    { name: "York", population: 153717, latitude: 53.9600, longitude: -1.0873 },
    { name: "Oxford", population: 152457, latitude: 51.7520, longitude: -1.2577 },
    { name: "Blackpool", population: 139720, latitude: 53.8168, longitude: -3.0357 },
    { name: "Cambridge", population: 124798, latitude: 52.2053, longitude: 0.1218 },
    { name: "Dundee", population: 148210, latitude: 56.4620, longitude: -2.9707 },
    { name: "Exeter", population: 117773, latitude: 50.7184, longitude: -3.5339 },
    { name: "Gloucester", population: 118900, latitude: 51.8642, longitude: -2.2380 },
    { name: "Telford", population: 142723, latitude: 52.6777, longitude: -2.4459 },
    { name: "Blackburn", population: 105085, latitude: 53.7467, longitude: -2.4853 },

    // Additional Towns (Population 50,000 - 100,000)
    { name: "Warrington", population: 98800, latitude: 53.3900, longitude: -2.5970 },
    { name: "Slough", population: 97000, latitude: 51.5105, longitude: -0.5950 },
    { name: "Eastbourne", population: 95000, latitude: 50.7686, longitude: 0.2905 },
    { name: "Basildon", population: 94000, latitude: 51.5762, longitude: 0.4789 },
    { name: "Grimsby", population: 93000, latitude: 53.5595, longitude: -0.0683 },
    { name: "High Wycombe", population: 92000, latitude: 51.6285, longitude: -0.7485 },
    { name: "Hastings", population: 91000, latitude: 50.8543, longitude: 0.5735 },
    { name: "Watford", population: 90000, latitude: 51.6565, longitude: -0.3903 },
    { name: "Rotherham", population: 89000, latitude: 53.4326, longitude: -1.3635 },
    { name: "Maidstone", population: 88000, latitude: 51.2720, longitude: 0.5292 },
    { name: "Chelmsford", population: 87000, latitude: 51.7355, longitude: 0.4692 },
    { name: "Colchester", population: 86000, latitude: 51.8959, longitude: 0.8919 },
    { name: "Crawley", population: 85000, latitude: 51.1132, longitude: -0.1871 },
    { name: "Worcester", population: 84000, latitude: 52.1935, longitude: -2.2215 },
    { name: "St Albans", population: 83000, latitude: 51.7520, longitude: -0.3343 },
    { name: "Rochdale", population: 82000, latitude: 53.6143, longitude: -2.1552 },
    { name: "Birkenhead", population: 81000, latitude: 53.3933, longitude: -3.0145 },
    { name: "Harlow", population: 80000, latitude: 51.7676, longitude: 0.0953 },
    { name: "Chester", population: 79000, latitude: 53.1905, longitude: -2.8916 },
    { name: "Burnley", population: 78000, latitude: 53.7897, longitude: -2.2427 },
    { name: "Darlington", population: 77000, latitude: 54.5235, longitude: -1.5579 },
    { name: "Stevenage", population: 76000, latitude: 51.9037, longitude: -0.2052 },
    { name: "Wigan", population: 75000, latitude: 53.5457, longitude: -2.6338 },
    { name: "Carlisle", population: 74000, latitude: 54.8925, longitude: -2.9340 },
    { name: "Halifax", population: 73000, latitude: 53.7267, longitude: -1.8580 },
    { name: "Southport", population: 72000, latitude: 53.6474, longitude: -3.0024 },
    { name: "Wakefield", population: 71000, latitude: 53.6833, longitude: -1.4977 },
    { name: "Worthing", population: 70000, latitude: 50.8180, longitude: -0.3743 },
    { name: "Mansfield", population: 69000, latitude: 53.1428, longitude: -1.1979 },
    { name: "Chesterfield", population: 68000, latitude: 53.2357, longitude: -1.4259 },
    
    // New additions from Ofcom area codes
    { name: "Bath", population: 65000, latitude: 51.3758, longitude: -2.3599 },
    { name: "Aylesbury", population: 58400, latitude: 51.8156, longitude: -0.8125 },
    { name: "Barnsley", population: 91297, latitude: 53.5533, longitude: -1.4790 },
    { name: "Bedford", population: 87590, latitude: 52.1389, longitude: -0.4667 },
    { name: "Boston", population: 35124, latitude: 52.9791, longitude: -0.0264 },
    { name: "Canterbury", population: 55240, latitude: 51.2800, longitude: 1.0800 },
    { name: "Cheltenham", population: 115300, latitude: 51.8959, longitude: -2.0783 },
    { name: "Chichester", population: 26795, latitude: 50.8365, longitude: -0.7792 },
    { name: "Doncaster", population: 110000, latitude: 53.5225, longitude: -1.1334 },
    { name: "Durham", population: 48069, latitude: 54.7761, longitude: -1.5733 },
    { name: "Guildford", population: 77057, latitude: 51.2362, longitude: -0.5704 },
    { name: "Harrogate", population: 75070, latitude: 53.9900, longitude: -1.5370 },
    { name: "Hereford", population: 55800, latitude: 52.0567, longitude: -2.7160 },
    { name: "Huddersfield", population: 162949, latitude: 53.6458, longitude: -1.7850 },
    { name: "Ipswich", population: 133384, latitude: 52.0567, longitude: 1.1482 },
    { name: "Lancaster", population: 52234, latitude: 54.0474, longitude: -2.8027 },
    { name: "Lincoln", population: 94600, latitude: 53.2307, longitude: -0.5406 },
    { name: "Middlesbrough", population: 140545, latitude: 54.5742, longitude: -1.2350 },
    { name: "Northampton", population: 215963, latitude: 52.2405, longitude: -0.9027 },
    { name: "Oldham", population: 96555, latitude: 53.5409, longitude: -2.1114 },
    { name: "Peterborough", population: 202259, latitude: 52.5725, longitude: -0.2431 },
    { name: "Preston", population: 141818, latitude: 53.7632, longitude: -2.7029 },
    { name: "Salisbury", population: 40302, latitude: 51.0693, longitude: -1.7957 },
    { name: "Scarborough", population: 61749, latitude: 54.2823, longitude: -0.4026 },
    { name: "Stafford", population: 68472, latitude: 52.8053, longitude: -2.1169 },
    { name: "Stockport", population: 136882, latitude: 53.4083, longitude: -2.1494 },
    { name: "Swindon", population: 185609, latitude: 51.5558, longitude: -1.7797 },
    { name: "Taunton", population: 69570, latitude: 51.0150, longitude: -3.1027 },
    { name: "Torquay", population: 65245, latitude: 50.4619, longitude: -3.5253 },
    { name: "Walsall", population: 67594, latitude: 52.5862, longitude: -1.9829 },
    { name: "Winchester", population: 45184, latitude: 51.0632, longitude: -1.3082 },
    { name: "Wrexham", population: 65692, latitude: 53.0428, longitude: -2.9926 },
    
    // Additional towns from Ofcom area codes
    { name: "Abingdon", population: 33130, latitude: 51.6711, longitude: -1.2828 },
    { name: "Aldershot", population: 37340, latitude: 51.2520, longitude: -0.7632 },
    { name: "Andover", population: 38290, latitude: 51.2088, longitude: -1.4800 },
    { name: "Ashford", population: 45780, latitude: 51.1465, longitude: 0.8752 },
    { name: "Banbury", population: 46853, latitude: 52.0602, longitude: -1.3403 },
    { name: "Barnstaple", population: 24033, latitude: 51.0777, longitude: -4.0583 },
    { name: "Basingstoke", population: 85627, latitude: 51.2667, longitude: -1.0876 },
    { name: "Berwick-upon-Tweed", population: 12043, latitude: 55.7702, longitude: -2.0053 },
    { name: "Beverley", population: 29403, latitude: 53.8450, longitude: -0.4271 },
    { name: "Bishops Stortford", population: 37838, latitude: 51.8720, longitude: 0.1630 },
    { name: "Bognor Regis", population: 63855, latitude: 50.7843, longitude: -0.6721 },
    { name: "Bridgwater", population: 35886, latitude: 51.1280, longitude: -2.9927 },
    { name: "Bridlington", population: 35369, latitude: 54.0831, longitude: -0.1937 },
    { name: "Bromsgrove", population: 29237, latitude: 52.3352, longitude: -2.0566 },
    { name: "Bury St Edmunds", population: 41332, latitude: 52.2474, longitude: 0.7183 },
    { name: "Camberley", population: 38031, latitude: 51.3354, longitude: -0.7439 },
    { name: "Cannock", population: 29018, latitude: 52.6890, longitude: -2.0320 },
    { name: "Chippenham", population: 45620, latitude: 51.4585, longitude: -2.1158 },
    { name: "Cirencester", population: 19076, latitude: 51.7174, longitude: -1.9680 },
    { name: "Clacton-on-Sea", population: 54095, latitude: 51.7924, longitude: 1.1545 },
    { name: "Congleton", population: 26482, latitude: 53.1638, longitude: -2.2131 },
    { name: "Corby", population: 56810, latitude: 52.4911, longitude: -0.7037 },
    { name: "Dartford", population: 97365, latitude: 51.4463, longitude: 0.2192 },
    { name: "Daventry", population: 25026, latitude: 52.2569, longitude: -1.1633 },
    { name: "Deal", population: 30085, latitude: 51.2233, longitude: 1.4018 },
    { name: "Dewsbury", population: 62945, latitude: 53.6921, longitude: -1.6345 },
    { name: "Dover", population: 31022, latitude: 51.1295, longitude: 1.3089 },
    { name: "Dunstable", population: 36253, latitude: 51.8858, longitude: -0.5206 },
    { name: "Epsom", population: 31489, latitude: 51.3364, longitude: -0.2702 },
    { name: "Evesham", population: 24428, latitude: 52.0935, longitude: -1.9456 },
    { name: "Falmouth", population: 21797, latitude: 50.1527, longitude: -5.0706 },
    { name: "Fareham", population: 42210, latitude: 50.8522, longitude: -1.1762 },
    { name: "Farnborough", population: 57486, latitude: 51.2867, longitude: -0.7520 },
    { name: "Farnham", population: 39488, latitude: 51.2147, longitude: -0.7973 },
    { name: "Folkestone", population: 46698, latitude: 51.0813, longitude: 1.1796 },
    { name: "Glastonbury", population: 8932, latitude: 51.1485, longitude: -2.7182 },
    { name: "Gosport", population: 82622, latitude: 50.7925, longitude: -1.1178 },
    { name: "Great Yarmouth", population: 38693, latitude: 52.6088, longitude: 1.7307 },
    { name: "Hartlepool", population: 88855, latitude: 54.6912, longitude: -1.2131 },
    { name: "Harwich", population: 14314, latitude: 51.9425, longitude: 1.2867 },
    { name: "Havant", population: 45826, latitude: 50.8542, longitude: -0.9825 },
    { name: "Hemel Hempstead", population: 97500, latitude: 51.7526, longitude: -0.4687 },
    { name: "Hereford", population: 55800, latitude: 52.0567, longitude: -2.7160 },
    { name: "Hitchin", population: 33350, latitude: 51.9469, longitude: -0.2827 },
    { name: "Hoddesdon", population: 20250, latitude: 51.7614, longitude: -0.0113 },
    { name: "Huntingdon", population: 24910, latitude: 52.3314, longitude: -0.1708 },
    { name: "Keighley", population: 53331, latitude: 53.8679, longitude: -1.9067 },
    { name: "Kendal", population: 28586, latitude: 54.3279, longitude: -2.7474 },
    { name: "Kettering", population: 56226, latitude: 52.3987, longitude: -0.7270 },
    { name: "Kidderminster", population: 55530, latitude: 52.3875, longitude: -2.2501 },
    { name: "King's Lynn", population: 42800, latitude: 52.7543, longitude: 0.3976 },
    { name: "Leamington Spa", population: 52213, latitude: 52.2823, longitude: -1.5359 },
    { name: "Letchworth", population: 33690, latitude: 51.9792, longitude: -0.2289 },
    { name: "Lichfield", population: 32219, latitude: 52.6812, longitude: -1.8271 },
    { name: "Lowestoft", population: 71010, latitude: 52.4754, longitude: 1.7501 },
    { name: "Lytham St Annes", population: 42954, latitude: 53.7516, longitude: -2.9638 },
    { name: "Malvern", population: 29626, latitude: 52.1113, longitude: -2.3288 },
    { name: "Margate", population: 61223, latitude: 51.3813, longitude: 1.3862 },
    { name: "Market Harborough", population: 22911, latitude: 52.4771, longitude: -0.9209 },
    { name: "Melton Mowbray", population: 25554, latitude: 52.7667, longitude: -0.8858 },
    { name: "Morecambe", population: 34843, latitude: 54.0698, longitude: -2.8686 },
    { name: "Newark", population: 37084, latitude: 53.0750, longitude: -0.8102 },
    { name: "Newbury", population: 31075, latitude: 51.4009, longitude: -1.3235 },
    { name: "Newquay", population: 22000, latitude: 50.4155, longitude: -5.0737 },
    { name: "Newton Abbot", population: 24029, latitude: 50.5297, longitude: -3.6103 },
    { name: "Nuneaton", population: 86552, latitude: 52.5230, longitude: -1.4671 },
    { name: "Pontefract", population: 30881, latitude: 53.6921, longitude: -1.3123 },
    { name: "Poole", population: 150092, latitude: 50.7175, longitude: -1.9874 },
    { name: "Ramsgate", population: 40408, latitude: 51.3364, longitude: 1.4196 },
    { name: "Redhill", population: 34498, latitude: 51.2404, longitude: -0.1702 },
    { name: "Rugby", population: 70628, latitude: 52.3711, longitude: -1.2652 },
    { name: "Runcorn", population: 61789, latitude: 53.3418, longitude: -2.7314 },
    { name: "St Austell", population: 19958, latitude: 50.3382, longitude: -4.7871 },
    { name: "St Helens", population: 102629, latitude: 53.4560, longitude: -2.7379 },
    { name: "Scarborough", population: 61749, latitude: 54.2823, longitude: -0.4026 },
    { name: "Scunthorpe", population: 82334, latitude: 53.5884, longitude: -0.6500 },
    { name: "Skegness", population: 19579, latitude: 53.1446, longitude: 0.3363 },
    { name: "Spalding", population: 28722, latitude: 52.7858, longitude: -0.1529 },
    { name: "Stafford", population: 68472, latitude: 52.8053, longitude: -2.1169 },
    { name: "Staines", population: 27894, latitude: 51.4314, longitude: -0.5046 },
    { name: "Stamford", population: 19701, latitude: 52.6569, longitude: -0.4787 },
    { name: "Stevenage", population: 87754, latitude: 51.9022, longitude: -0.2022 },
    { name: "Stratford-upon-Avon", population: 27445, latitude: 52.1917, longitude: -1.7067 },
    { name: "Stroud", population: 32670, latitude: 51.7449, longitude: -2.2161 },
    { name: "Tamworth", population: 76589, latitude: 52.6339, longitude: -1.6959 },
    { name: "Tewkesbury", population: 19901, latitude: 51.9941, longitude: -2.1579 },
    { name: "Tonbridge", population: 40356, latitude: 51.1892, longitude: 0.2739 },
    { name: "Trowbridge", population: 39409, latitude: 51.3187, longitude: -2.2087 },
    { name: "Tunbridge Wells", population: 56500, latitude: 51.1326, longitude: 0.2673 },
    { name: "Uckfield", population: 14493, latitude: 50.9701, longitude: 0.0953 },
    { name: "Wadebridge", population: 7900, latitude: 50.5168, longitude: -4.8343 },
    { name: "Wellingborough", population: 49087, latitude: 52.3023, longitude: -0.6937 },
    { name: "Welwyn Garden City", population: 48380, latitude: 51.8025, longitude: -0.2072 },
    { name: "Weston-super-Mare", population: 76143, latitude: 51.3477, longitude: -2.9767 },
    { name: "Weymouth", population: 52323, latitude: 50.6141, longitude: -2.4577 },
    { name: "Whitby", population: 13213, latitude: 54.4858, longitude: -0.6142 },
    { name: "Widnes", population: 61464, latitude: 53.3650, longitude: -2.7316 },
    { name: "Windsor", population: 32744, latitude: 51.4839, longitude: -0.6044 },
    { name: "Witney", population: 27522, latitude: 51.7859, longitude: -1.4851 },
    { name: "Woking", population: 62796, latitude: 51.3190, longitude: -0.5576 },
    { name: "Workington", population: 25207, latitude: 54.6433, longitude: -3.5457 },
    { name: "Yeovil", population: 45784, latitude: 50.9421, longitude: -2.6328 }
];

ukTownsAndCities.forEach(city => {
    city.areaCode = window.getAreaCode(city.name);
});

console.log('ukTownsAndCities loaded:', ukTownsAndCities.length);

const categorizedCities = categorizeCities(ukTownsAndCities);

// Expose ukTownsAndCities globally
window.ukTownsAndCities = ukTownsAndCities;
